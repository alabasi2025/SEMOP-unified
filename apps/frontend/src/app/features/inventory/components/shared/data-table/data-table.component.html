<div class="data-table-container" [class.responsive]="responsive">
  <!-- Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
  <div *ngIf="loading" class="loading-overlay">
    <div class="spinner"></div>
    <p>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
  </div>

  <!-- Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
  <div class="table-wrapper">
    <table class="data-table">
      <!-- Ø±Ø£Ø³ Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
      <thead>
        <tr>
          <!-- Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± -->
          <th *ngIf="selectable && multiSelect" class="select-column">
            <input 
              type="checkbox" 
              [checked]="isAllSelected()"
              (change)="onSelectAll($event)"
            />
          </th>

          <!-- Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø±Ù‚Ù… -->
          <th class="number-column">#</th>

          <!-- Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© -->
          <th 
            *ngFor="let column of columns" 
            [class.sortable]="column.sortable"
            [style.width]="column.width"
            [style.text-align]="column.align || 'right'"
            (click)="onSort(column)"
          >
            <div class="th-content">
              <span>{{ column.header }}</span>
              <i *ngIf="column.sortable" class="sort-icon {{ getSortIcon(column) }}"></i>
            </div>
          </th>

          <!-- Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª -->
          <th *ngIf="actions.length > 0" class="actions-column">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
      </thead>

      <!-- Ø¬Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
      <tbody *ngIf="!loading">
        <!-- Ø­Ø§Ù„Ø© ÙØ§Ø±ØºØ© -->
        <tr *ngIf="data.length === 0" class="empty-row">
          <td [attr.colspan]="columns.length + (selectable && multiSelect ? 1 : 0) + (actions.length > 0 ? 1 : 0) + 1">
            <div class="empty-state">
              <i class="empty-icon">ğŸ“­</i>
              <p>{{ emptyMessage }}</p>
            </div>
          </td>
        </tr>

        <!-- Ø§Ù„ØµÙÙˆÙ -->
        <tr 
          *ngFor="let row of data; let i = index" 
          class="data-row"
          [class.selected]="isRowSelected(row)"
          (click)="onRowClick(row)"
        >
          <!-- Ø®Ù„ÙŠØ© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± -->
          <td *ngIf="selectable && multiSelect" class="select-cell">
            <input 
              type="checkbox" 
              [checked]="isRowSelected(row)"
              (change)="onRowSelect(row, $event)"
            />
          </td>

          <!-- Ø®Ù„ÙŠØ© Ø§Ù„Ø±Ù‚Ù… -->
          <td class="number-cell">{{ getRowNumber(i) }}</td>

          <!-- Ø§Ù„Ø®Ù„Ø§ÙŠØ§ -->
          <td 
            *ngFor="let column of columns"
            [style.text-align]="column.align || 'right'"
          >
            {{ getCellValue(row, column) }}
          </td>

          <!-- Ø®Ù„ÙŠØ© Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª -->
          <td *ngIf="actions.length > 0" class="actions-cell">
            <div class="action-buttons">
              <button
                *ngFor="let action of actions"
                [hidden]="!isActionVisible(action, row)"
                [disabled]="isActionDisabled(action, row)"
                [class]="'action-btn ' + (action.color || 'primary')"
                [title]="action.label"
                (click)="onActionClick(action, row, $event)"
              >
                <i class="action-icon">{{ action.icon }}</i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>

      <!-- Ø¬Ø³Ù… Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªØ­Ù…ÙŠÙ„ÙŠ -->
      <tbody *ngIf="loading">
        <tr *ngFor="let _ of skeletonRows" class="skeleton-row">
          <td *ngIf="selectable && multiSelect">
            <div class="skeleton-cell"></div>
          </td>
          <td>
            <div class="skeleton-cell"></div>
          </td>
          <td *ngFor="let column of columns">
            <div class="skeleton-cell"></div>
          </td>
          <td *ngIf="actions.length > 0">
            <div class="skeleton-cell"></div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="table-footer" *ngIf="totalPages > 1">
    <div class="pagination">
      <button 
        class="page-btn"
        [disabled]="currentPage === 1"
        (click)="onPageChange(1)"
      >
        Ø§Ù„Ø£ÙˆÙ„Ù‰
      </button>
      <button 
        class="page-btn"
        [disabled]="currentPage === 1"
        (click)="onPageChange(currentPage - 1)"
      >
        Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
      </button>

      <span class="page-info">
        ØµÙØ­Ø© {{ currentPage }} Ù…Ù† {{ totalPages }}
      </span>

      <button 
        class="page-btn"
        [disabled]="currentPage === totalPages"
        (click)="onPageChange(currentPage + 1)"
      >
        Ø§Ù„ØªØ§Ù„ÙŠØ©
      </button>
      <button 
        class="page-btn"
        [disabled]="currentPage === totalPages"
        (click)="onPageChange(totalPages)"
      >
        Ø§Ù„Ø£Ø®ÙŠØ±Ø©
      </button>
    </div>

    <div class="items-info">
      Ø¹Ø±Ø¶ {{ (currentPage - 1) * pageSize + 1 }} - {{ Math.min(currentPage * pageSize, totalItems) }} Ù…Ù† {{ totalItems }}
    </div>
  </div>
</div>
