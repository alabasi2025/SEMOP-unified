<!--
  @file warehouse-stock.component.html
  @description Ù‚Ø§Ù„Ø¨ HTML Ù„Ù…ÙƒÙˆÙ† Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ (WarehouseStockComponent).
  ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨Ø·Ø§Ù‚Ø§Øª Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªØŒ Ø´Ø±ÙŠØ· Ø£Ø¯ÙˆØ§Øª Ù„Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµØ¯ÙŠØ±ØŒ ÙˆØ¬Ø¯ÙˆÙ„ Ø¹Ø±Ø¶ Ø§Ù„Ø£ØµÙ†Ø§Ù.
-->

<div class="warehouse-stock-container">

  <!-- Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø§Ù… -->
  <div *ngIf="loading" class="loading-overlay">
    <div class="spinner"></div>
    <span>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ†...</span>
  </div>

  <!-- Ù‚Ø³Ù… Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª - ÙŠØ³ØªØ®Ø¯Ù… StatsCardComponent Ø§Ù„Ù…ÙØªØ±Ø¶ -->
  <div class="stats-section" *ngIf="statsData$ | async as stats">
    <!-- ÙŠØªÙ… ØªÙƒØ±Ø§Ø± Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
    <ng-container *ngFor="let stat of stats">
      <!-- Ø§ÙØªØ±Ø§Ø¶ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙƒÙˆÙ† Ù…Ø´ØªØ±Ùƒ app-stats-card -->
      <!-- <app-stats-card [data]="stat"></app-stats-card> -->
      <!-- Ø¨Ø¯ÙŠÙ„ Ø¨Ø³ÙŠØ· ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ù…Ø´ØªØ±Ùƒ -->
      <div class="stat-card">
        <div class="stat-title">{{ stat.title }}</div>
        <div class="stat-value" [style.color]="stat.color">{{ stat.value | number }} {{ stat.unit }}</div>
      </div>
    </ng-container>
  </div>

  <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª ÙˆØ§Ù„Ø¨Ø­Ø« -->
  <div class="toolbar">
    <h2 class="component-title">Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹: {{ warehouseId }}</h2>

    <div class="actions">
      <!-- Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ© -->
      <div class="search-box">
        <input
          type="text"
          placeholder="Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù Ø£Ùˆ Ø±Ù…Ø²Ù‡..."
          [(ngModel)]="searchTerm"
          (ngModelChange)="onSearchChange($event)"
          [disabled]="loading"
        >
        <i class="search-icon">ğŸ”</i>
      </div>

      <!-- Ø²Ø± Ø§Ù„ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel -->
      <button class="action-button export-button" (click)="onExportExcel()" [disabled]="loading">
        <i class="export-icon">ğŸ“Š</i>
        <span>ØªØµØ¯ÙŠØ± Excel</span>
      </button>

      <!-- Ø²Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ« -->
      <button class="action-button refresh-button" (click)="onRefresh()" [disabled]="loading">
        <i class="refresh-icon">ğŸ”„</i>
        <span>ØªØ­Ø¯ÙŠØ«</span>
      </button>
    </div>
  </div>

  <!-- Ø¬Ø¯ÙˆÙ„ Ø¹Ø±Ø¶ Ø§Ù„Ø£ØµÙ†Ø§Ù - ÙŠØ³ØªØ®Ø¯Ù… DataTableComponent Ø§Ù„Ù…ÙØªØ±Ø¶ -->
  <div class="table-section">
    <ng-container *ngIf="filteredItems$ | async as items">
      <!-- Ø§ÙØªØ±Ø§Ø¶ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙƒÙˆÙ† Ù…Ø´ØªØ±Ùƒ app-data-table -->
      <!--
      <app-data-table
        [data]="items"
        [columns]="columns"
        (rowClick)="onItemClick($event)"
        [loading]="loading"
      >
      </app-data-table>
      -->

      <!-- Ø¨Ø¯ÙŠÙ„ Ø¨Ø³ÙŠØ· Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ù…Ø´ØªØ±Ùƒ -->
      <table class="stock-table" *ngIf="items.length > 0; else emptyState">
        <thead>
          <tr>
            <th *ngFor="let col of columns">{{ col.header }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of items" (click)="onItemClick(item)">
            <td>{{ item.name }}</td>
            <td>{{ item.sku }}</td>
            <td>{{ item.currentStock | number }}</td>
            <td>{{ item.unitPrice | currency:'SAR' }}</td>
            <td>{{ item.totalValue | currency:'SAR' }}</td>
            <td>
              <span [ngClass]="getStatusClass(item.status)">
                {{ item.status === 'low' ? 'Ù†Ø§Ù‚Øµ' : item.status === 'excess' ? 'Ø²Ø§Ø¦Ø¯' : 'Ø¹Ø§Ø¯ÙŠ' }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª -->
      <ng-template #emptyState>
        <div class="empty-state">
          <i class="no-data-icon">ğŸ“¦</i>
          <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ØµÙ†Ø§Ù Ù…Ø®Ø²ÙˆÙ† Ù„Ø¹Ø±Ø¶Ù‡Ø§ Ø£Ùˆ Ù„Ø§ ØªØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«.</p>
        </div>
      </ng-template>
    </ng-container>
  </div>

</div>
